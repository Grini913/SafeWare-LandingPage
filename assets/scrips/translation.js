const translation ={
    es :  {
    navbar:{
      home: 'Inicio',
      feature: 'Caracteristicas',
      about: 'Acerca de Nosotros',
      plans: 'Planes',
      testimonials: 'Testimonios',
      faq: 'Preguntas',
      contact: 'Contactanos'
    },
    hero: {
        title: 'SafeWare: Detecci√≥n inteligente de riesgos en tiempo real.',
        subtitle: 'Un sistema integral dise√±ado para mantener tu industria segura 24/7',
    },
    features:{
        htitle: 'LO QUE OFRECEMOS',
        title: 'TU TRANQUILIDAD TAMBI√âN SE PUEDE MEDIR',
        subtitle: 'Nuestro sistema detecta riesgos antes de que ocurran, protegiendo tu equipo, tu inventario y tu tiempo',
        cards:{
            monitoring:{
                title: 'MONITOREO',
                subtitle: 'Supervisa condiciones ambientales y operativas al instante para detectar riesgos de forma oportuna.'
            },
            acces:{
                title:'ACCESO',
                subtitle: 'Accede al sistema desde cualquier dispositivo, en cualquier momento y lugar',
            },
            analysis:{
                title:'AN√ÅLISIS',
                subtitle: 'Identifica patrones y anticipa fallos con reportes automaticos para mejorar la toma de decisiones',
            },
            automation:{
                title: 'AUTOMATIZACION',
                subtitle: 'Ejecuta respuestas automaticas ante alertas, optimizando la seguridad y eficiencia del almac√©n',
            },
            security: {
                title: 'SEGURIDAD',
                subtitle: 'Protege los datos con protocolos confiables y monitoreo continuo del sistema.',
            }
        },
        btnmore: 'Descubre c√≥mo funciona',
    },
    about: {
    title: 'Sobre SafeWare',
    subtitle: 'Combinamos seguridad y monitoreo inteligente en un solo nombre para proteger lo que m√°s importa.',
    mission: {
        title: 'Nuestra Misi√≥n',
        text: 'SafeWare es un sistema de detecci√≥n de anomal√≠as para almacenes y √°reas cr√≠ticas que manejan materiales sensibles, integrando sensores de temperatura, humedad, vibraciones y fugas para ofrecer alertas en tiempo real, automatizar protocolos de seguridad y generar reportes √∫tiles para auditor√≠as. Con ello, ayudamos a reducir gastos, proteger el inventario y garantizar la continuidad operativa.',
        highlight: 'Comprometidos con la seguridad y la eficiencia para tu tranquilidad'
    },
    problem: {
        title: 'Antecedentes y problem√°tica',
        text: 'El almacenamiento de productos qu√≠micos, materiales inflamables y equipos mec√°nicos sensibles representa un desaf√≠o cr√≠tico en la gesti√≥n de seguridad industrial. Seg√∫n LHDSA (2025), los principales riesgos incluyen accidentes por fugas, incendios, explosiones y da√±os por humedad, los cuales pueden derivar en accidentes graves si no se detectan y controlan oportunamente.'
    },
    icons: {
        temperature: {
            title: 'Temperatura',
            text: 'Monitoreo constante para prevenir sobrecalentamiento'
        },
        humidity: {
            title: 'Humedad y fugas',
            text: 'Detecci√≥n temprana de fugas y niveles de humedad cr√≠ticos'
        },
        vibration: {
            title: 'Vibraciones',
            text: 'Alertas por vibraciones an√≥malas en maquinaria sensible'
        }
    }
    },

    plans: {
    title: 'Nuestros Planes',
    subtitle: 'Elige el plan perfecto para tus necesidades de seguridad',
    cards: {
        basic: {
            name: 'B√°sico',
            price: '$19',
            features: [
                'Monitoreo b√°sico',
                'Alertas por email',
                'Soporte limitado'
            ],
            button: 'Seleccionar'
        },
        pro: {
            name: 'Pro',
            price: '$39',
            features: [
                'Monitoreo avanzado',
                'Alertas en tiempo real',
                'Soporte prioritario',
                'Informes mensuales'
            ],
            button: 'Seleccionar'
        },
        premium: {
            name: 'Premium',
            price: '$59',
            features: [
                'Monitoreo completo',
                'Automatizaci√≥n avanzada',
                'Soporte 24/7',
                'Informes personalizados'
            ],
            button: 'Seleccionar'
        }
    }
    }, 
    testimonials: {
    title: 'Lo que dicen nuestros clientes',
    subtitle: 'Historias reales de c√≥mo SafeWare mejora la seguridad y eficiencia operativa',
    client1: {
        text: 'Desde que implementamos el sistema, trabajar se volvi√≥ mucho m√°s seguro y organizado. Ahora recibimos alertas en tiempo real en nuestros celulares y podemos actuar de inmediato ante cualquier riesgo. La comunicaci√≥n y el control mejoraron por completo.',
        name: 'Yamil, J. Ingeniero'
    },
    client2: {
        text: 'Desde que implementamos esta soluci√≥n, la coordinaci√≥n entre nuestras √°reas mejor√≥ notablemente. Ahora tenemos un control total sobre cada proceso log√≠stico, reduciendo tiempos y errores. Es una herramienta clave para mantener la eficiencia operativa.',
        name: 'Brenda, M. Gerente de operaciones log√≠sticas'
    }
    },
    faq: {
    title: 'Preguntas Frecuentes',
    items: {
        1: {
            question: '¬øQu√© es SafeWare?',
            answer: 'SafeWare es una soluci√≥n avanzada que utiliza inteligencia artificial para detectar riesgos en tiempo real, protegiendo tu industria las 24 horas del d√≠a.'
        },
        2: {
            question: '¬øQui√©n puede usar SafeWare?',
            answer: 'SafeWare est√° dise√±ado para industrias como manufactura, log√≠stica y almacenes que necesitan monitoreo continuo y seguridad avanzada.'
        },
        3: {
            question: '¬øNecesito conocimientos t√©cnicos para usarlo?',
            answer: 'No, SafeWare ofrece una interfaz intuitiva que permite a cualquier usuario configurar alertas y monitorear riesgos sin complicaciones.'
        },
        4: {
            question: '¬øEs compatible con dispositivos m√≥viles?',
            answer: 'S√≠, SafeWare es completamente responsivo y accesible desde smartphones, tablets y computadoras sin perder funcionalidad.'
        },
        5: {
            question: '¬øC√≥mo mejora SafeWare mi negocio?',
            answer: 'SafeWare reduce costos al prevenir incidentes, optimiza operaciones con automatizaci√≥n y proporciona informes detallados para tomar decisiones informadas.'
        }
    }
    },

    contact: {
    title: 'Hablemos de c√≥mo podemos <span>proteger tu negocio.</span>',
    description: 'Estamos aqu√≠ para ayudarte a proteger lo que m√°s importa. Escr√≠benos y descubre c√≥mo <b>SafeWare</b> puede optimizar la seguridad y el mantenimiento en tus instalaciones.',
    form: {
        title: 'Env√≠anos un mensaje',
        name: 'Nombre completo',
        email: 'Correo electr√≥nico',
        company: 'Empresa (Opcional)',
        message: 'Mensaje',
        button: 'Cont√°ctanos'
    },
    details: {
        location: {
            title: 'Nuestra oficina',
            text: 'Ubicaci√≥n oficina'
        },
        email: {
            title: 'Email de Contacto',
            text: 'info@safeware.com'
        },
        phone: {
            title: 'Tel√©fono',
            text: '+1 (234) 567-8900'
        }
    }
    },
    footer: {
        title: 'SafeWare', // T√≠tulo principal del footer (puede ser opcional si usas el logo)
        description: 'Protegiendo tu industria con tecnolog√≠a avanzada.',
        socialLinks: {
            facebook: 'Facebook',
            email: 'Correo',
            linkedin: 'LinkedIn'
        },
        usefulLinks: {
            title: 'Enlaces √ötiles',
            items: [
                { text: 'Inicio', href: '#home' },
                { text: 'Caracter√≠sticas', href: '#features' },
                { text: 'Nosotros', href: '#about-section' },
                { text: 'Planes', href: '#plans' },
                { text: 'Contacto', href: '#contact' }
            ]
        },
        contact: {
            title: 'Cont√°ctanos',
            phone: '+1 234 567 890',
            email: 'info@safeware.com',
            address: '123 Calle Segura, Ciudad, Pa√≠s'
        },
        copyright: '&copy; 2025 SafeWare. Todos los derechos reservados.'
    },
   

},

en : {
  navbar: {
    home: "Home",
    feature: "Features",
    about: "About Us",
    plans: "Plans",
    testimonials: "Testimonials",
    faq: "FAQ",
    contact: "Contact Us",
  },
  hero: {
    title: "SafeWare: Intelligent real-time risk detection.",
    subtitle: "A comprehensive system designed to keep your industry safe 24/7",
  },
  features: {
    htitle: "WHAT WE OFFER",
    title: "YOUR PEACE OF MIND CAN ALSO BE MEASURED",
    subtitle:
      "Our system detects risks before they happen, protecting your team, your inventory, and your time.",
    cards: {
      monitoring: {
        title: "MONITORING",
        subtitle:
          "Monitor environmental and operational conditions instantly to detect risks on time.",
      },
      acces: {
        title: "ACCESS",
        subtitle:
          "Access the system from any device, anytime, anywhere.",
      },
      analysis: {
        title: "ANALYSIS",
        subtitle:
          "Identify patterns and anticipate failures with automatic reports to improve decision-making.",
      },
      automation: {
        title: "AUTOMATION",
        subtitle:
          "Execute automatic responses to alerts, optimizing warehouse safety and efficiency.",
      },
      security: {
        title: "SECURITY",
        subtitle:
          "Protect data with reliable protocols and continuous system monitoring.",
      },
    },
    btnmore: "Discover how it works",
  },
  about: {
    title: "About SafeWare",
    subtitle:
      "We combine safety and intelligent monitoring in one name to protect what matters most.",
    mission: {
      title: "Our Mission",
      text: "SafeWare is an anomaly detection system for warehouses and critical areas handling sensitive materials, integrating sensors for temperature, humidity, vibration, and leaks to provide real-time alerts, automate safety protocols, and generate useful audit reports. This helps reduce costs, protect inventory, and ensure operational continuity.",
      highlight:
        "Committed to safety and efficiency for your peace of mind.",
    },
    problem: {
      title: "Background and Problem",
      text: "The storage of chemicals, flammable materials, and sensitive mechanical equipment represents a major challenge in industrial safety management. According to LHDSA (2025), the main risks include leaks, fires, explosions, and moisture damage, which can lead to serious accidents if not detected and controlled in time.",
    },
    icons: {
      temperature: {
        title: "Temperature",
        text: "Constant monitoring to prevent overheating.",
      },
      humidity: {
        title: "Humidity and Leaks",
        text: "Early detection of leaks and critical humidity levels.",
      },
      vibration: {
        title: "Vibrations",
        text: "Alerts for abnormal vibrations in sensitive machinery.",
      },
    },
  },

  plans: {
    title: "Our Plans",
    subtitle: "Choose the perfect plan for your security needs",
    cards: {
      basic: {
        name: "Basic",
        price: "$19",
        features: [
          "Basic monitoring",
          "Email alerts",
          "Limited support",
        ],
        button: "Select",
      },
      pro: {
        name: "Pro",
        price: "$39",
        features: [
          "Advanced monitoring",
          "Real-time alerts",
          "Priority support",
          "Monthly reports",
        ],
        button: "Select",
      },
      premium: {
        name: "Premium",
        price: "$59",
        features: [
          "Full monitoring",
          "Advanced automation",
          "24/7 support",
          "Custom reports",
        ],
        button: "Select",
      },
    },
  },
  testimonials: {
    title: "What Our Clients Say",
    subtitle:
      "Real stories about how SafeWare improves safety and operational efficiency",
    client1: {
      text: "Since implementing the system, working has become much safer and more organized. We now receive real-time alerts on our phones and can act immediately in case of any risk. Communication and control have completely improved.",
      name: "Yamil J., Engineer",
    },
    client2: {
      text: "Since adopting this solution, coordination between our departments has improved significantly. We now have full control over every logistic process, reducing time and errors. It's a key tool for maintaining operational efficiency.",
      name: "Brenda M., Logistics Operations Manager",
    },
  },
  faq: {
    title: "Frequently Asked Questions",
    items: {
      1: {
        question: "What is SafeWare?",
        answer:
          "SafeWare is an advanced solution that uses artificial intelligence to detect real-time risks, protecting your industry 24/7.",
      },
      2: {
        question: "Who can use SafeWare?",
        answer:
          "SafeWare is designed for industries such as manufacturing, logistics, and warehouses that require continuous monitoring and advanced security.",
      },
      3: {
        question: "Do I need technical knowledge to use it?",
        answer:
          "No, SafeWare offers an intuitive interface that allows any user to set up alerts and monitor risks easily.",
      },
      4: {
        question: "Is it compatible with mobile devices?",
        answer:
          "Yes, SafeWare is fully responsive and accessible from smartphones, tablets, and computers without losing functionality.",
      },
      5: {
        question: "How does SafeWare improve my business?",
        answer:
          "SafeWare reduces costs by preventing incidents, optimizes operations through automation, and provides detailed reports to make informed decisions.",
      },
    },
  },

  contact: {
    title: "Let's talk about how we can <span>protect your business.</span>",
    description:
      "We‚Äôre here to help you protect what matters most. Write to us and discover how <b>SafeWare</b> can optimize security and maintenance in your facilities.",
    form: {
      title: "Send us a message",
      name: "Full name",
      email: "Email address",
      company: "Company (Optional)",
      message: "Message",
      button: "Contact us",
    },
    details: {
      location: {
        title: "Our Office",
        text: "Office location",
      },
      email: {
        title: "Contact Email",
        text: "info@safeware.com",
      },
      phone: {
        title: "Phone",
        text: "+1 (234) 567-8900",
      },
    },
  },
  footer: {
    title: "SafeWare",
    description: "Protecting your industry with advanced technology.",
    socialLinks: {
      facebook: "Facebook",
      email: "Email",
      linkedin: "LinkedIn",
    },
    usefulLinks: {
      title: "Useful Links",
      items: [
        { text: "Home", href: "#home" },
        { text: "Features", href: "#features" },
        { text: "About", href: "#about-section" },
        { text: "Plans", href: "#plans" },
        { text: "Contact", href: "#contact" },
      ],
    },
    contact: {
      title: "Contact Us",
      phone: "+1 234 567 890",
      email: "info@safeware.com",
      address: "123 Safe Street, City, Country",
    },
    copyright: "&copy; 2025 SafeWare. All rights reserved.",
  },
}
};

// --- util: obtener traducci√≥n usando claves anidadas como "feature.cards.free.title"
function getNestedTranslation(obj, key) {
  if (!obj || !key) return undefined;
  return key.split('.').reduce((acc, k) => (acc !== undefined ? acc[k] : undefined), obj);
}

// --- aplica traducci√≥n al elemento
function applyTranslationToElement(el, value) {
  if (value === undefined || value === null) return;

  // arrays -> si es UL/OL, renderizamos <li>, si no, los unimos por coma
  if (Array.isArray(value)) {
    if (el.tagName === 'UL' || el.tagName === 'OL') {
      el.innerHTML = value.map(item => `<li>${item}</li>`).join('');
    } else {
      el.textContent = value.join(', ');
    }
    return;
  }

  // objetos -> preferimos mostrar .title o .text si existen
  if (typeof value === 'object') {
    if (value.title) el.textContent = value.title;
    else if (value.text) el.textContent = value.text;
    else el.textContent = JSON.stringify(value);
    return;
  }

  // strings / numbers
  // Solo para H2, H3 o P dejamos HTML (para <span> o <b>)
  if (el.tagName === 'H2' || el.tagName === 'H3' || el.tagName === 'P') {
    el.innerHTML = value;
  } else {
    // üëá aqu√≠ nos aseguramos de no tocar spans de material-icons
    if (!el.classList.contains('material-icons')) {
      el.textContent = value;
    }
  }
}

// --- L√≥gica principal de traducci√≥n
let currentLang = localStorage.getItem('lang') || 'en';

function translatePage(lang) {
  const root = translation[lang];
  if (!root) {
    console.warn('Language not found:', lang);
    return;
  }

  document.querySelectorAll('[data-i18n]').forEach((el) => {
    const key = el.getAttribute('data-i18n'); // e.g. "contact.title"
    const value = getNestedTranslation(root, key);

    if (value !== undefined) {
      // si es input o textarea con placeholder
      if ((el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') && el.placeholder !== undefined) {
        el.placeholder = typeof value === 'string' ? value : String(value);
      } else {
        applyTranslationToElement(el, value);
      }
    }
  });

  document.documentElement.lang = lang;
  console.log('Language switched to', lang);
}

// --- funci√≥n auxiliar para el estado visual del bot√≥n
function updateButtonState(lang) {
  document.querySelectorAll('#language-switcher .lang-btn').forEach(btn => {
    const isActive = btn.dataset.lang === lang;
    btn.classList.toggle('active', isActive);
  });
}

// --- evento de cambio de idioma
document.querySelectorAll('#language-switcher .lang-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const selectedLang = btn.dataset.lang;
    if (selectedLang && selectedLang !== currentLang) {
      currentLang = selectedLang;
      localStorage.setItem('lang', currentLang);
      translatePage(currentLang);
      updateButtonState(currentLang);
    }
  });
});

// --- Inicializaci√≥n al cargar
translatePage(currentLang);
updateButtonState(currentLang);